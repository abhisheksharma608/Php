<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BGT Assessment Portal — Certificate Gallery</title>
<style>
  :root{--bg:#eef2f5;--card:#fff;--accent:#b8860b;--muted:#556;}
  body{font-family:Inter,Arial,Helvetica,sans-serif;background:linear-gradient(180deg,#f7fafc 0%, #eef2f5 100%);margin:0;padding:28px;display:flex;justify-content:center}
  .wrap{width:1000px;max-width:98%;}
  .panel{background:var(--card);border-radius:10px;padding:18px 20px;box-shadow:0 8px 30px rgba(20,30,50,.08)}
  h1{margin:0 0 12px;text-align:center;color:#1b2b3a}
  .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input,select{padding:10px;border-radius:6px;border:1px solid #e2e8f0;width:100%;font-size:14px}
  .full{grid-column:1/-1}
  .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
  .note{font-size:13px;color:#556;margin-top:8px}
  #testArea{display:none;margin-top:14px}
  .question-box{border-radius:8px;padding:12px;border:1px solid #e6eef6;background:#fbfdff}
  .options{margin-top:10px}
  .option{padding:8px;border-radius:6px;border:1px solid #e9eef6;margin-bottom:8px;cursor:pointer;display:flex;align-items:center}
  .controls{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
  .results{display:none;margin-top:14px;padding:12px;border-radius:8px;border:1px solid #e6eef6;background:#fff}
  table{width:100%;border-collapse:collapse;margin-top:6px}
  th,td{padding:8px;text-align:left;border:1px solid #f1f5f9}
  .gallery{display:flex;flex-wrap:wrap;gap:12px;margin-top:12px}
  .cert-card{width:320px;border-radius:8px;padding:8px;background:white;box-shadow:0 6px 18px rgba(10,20,30,.06);text-align:center}
  .cert-card img{width:100%;border-radius:4px}
  .center{text-align:center}
  footer{margin-top:14px;text-align:center;font-size:13px;color:#7a8794}
  @media(max-width:720px){.form-grid{grid-template-columns:1fr} .cert-card{width:100%}}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel">
    <h1>BGT Assessment Portal</h1>
    <div id="startForm">
      <div class="form-grid">
        <div>
          <label>Your Name *</label>
          <input id="name" placeholder="Enter full name" />
        </div>
        <div>
          <label>Mobile Number</label>
          <input id="mobile" placeholder="Mobile number" />
        </div>
        <div>
          <label>Batch</label>
          <select id="batch"><option value="">Select batch</option><option>Batch A</option><option>Batch B</option></select>
        </div>
        <div>
          <label>College</label>
          <input id="college" placeholder="College name" />
        </div>
        <div>
          <label>Year</label>
          <select id="year"><option value="">Select year</option><option>1st</option><option>2nd</option><option>3rd</option></select>
        </div>
        <div>
          <label>Course</label>
          <select id="course"><option value="">Select course</option><option>B.Tech</option><option>BCA</option><option>MCA</option></select>
        </div>
        <div class="full">
          <label>Assessment Code *</label>
          <input id="code" placeholder="Enter code e.g. BGT420" />
        </div>
      </div>
      <div class="center">
        <button id="startBtn" class="btn">Start Test</button>
      </div>
      <p class="note center">Use code <strong>BGT420</strong>. Test: 10 min, 15 Qs. Certificate preview + download if score ≥ 7.</p>
    </div>

    <div id="testArea">
      <div class="question-box">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><strong id="showName"></strong><div style="font-size:13px;color:#667">Time left: <span id="timer">10:00</span></div></div>
          <div style="font-size:13px;color:#667">Q <span id="qIndex">1</span>/15</div>
        </div>
        <hr style="margin:8px 0">
        <div id="questionText" style="font-weight:600">Question here</div>
        <div id="options" class="options"></div>
        <div class="controls">
          <div><button id="prevBtn" class="btn" style="background:#6b7280">Previous</button> <button id="nextBtn" class="btn">Next</button></div>
          <div><button id="submitTest" class="btn" style="background:#0b5">Submit Test</button></div>
        </div>
      </div>

      <div id="results" class="results">
        <h3>Results</h3>
        <table>
          <tr><th>Total</th><td id="resTotal">15</td></tr>
          <tr><th>Attempted</th><td id="resAttempted">0</td></tr>
          <tr><th>Correct</th><td id="resCorrect">0</td></tr>
          <tr><th>Wrong</th><td id="resIncorrect">0</td></tr>
          <tr><th>Score</th><td id="resScore">0/15</td></tr>
        </table>
        <div id="certActions" style="margin-top:10px;"></div>
      </div>

      <div style="margin-top:14px">
        <h3>Certificate Gallery</h3>
        <div id="gallery" class="gallery">
          <!-- generated certificates appear here -->
        </div>
      </div>
    </div>

    <footer>Made with HTML/CSS/JS — BGT Technologies</footer>
  </div>
</div>

<script>
// sample 15 questions (answers indices)
const QUESTIONS = [
  {q:'HTML stands for?', options:['Hyper Text Markup Language','Home Tool Markup','Hyperlink Text','None'], answer:0},
  {q:'CSS is for?', options:['Styling','Backend','DB','All'], answer:0},
  {q:'JS tag?', options:['<script>','<js>','<code>','<javascript>'], answer:0},
  {q:'White hex?', options:['#FFFFFF','#000000','#FF0000','#00FF00'], answer:0},
  {q:'Array push?', options:['push','popo','listen','style'], answer:0},
  {q:'HTTP?', options:['HyperText Transfer Protocol','Hyper Transfer','None','Both'], answer:0},
  {q:'Semantic article?', options:['<article>','<div>','<span>','<b>'], answer:0},
  {q:'Selector id?', options:['#id','.class','element','*'], answer:0},
  {q:'Center element?', options:['margin:auto','float:left','position:fixed','display:inline'], answer:0},
  {q:'=== operator?', options:['strict equality','assignment','compare','none'], answer:0},
  {q:'Font size property?', options:['font-size','text-size','size','font-weight'], answer:0},
  {q:'Local storage?', options:['browser','server','db','cloud'], answer:0},
  {q:'Block element?', options:['div','span','img','a'], answer:0},
  {q:'Flex align?', options:['align-items','justify','float','clear'], answer:0},
  {q:'Button display?', options:['inline-block','block','inline','none'], answer:0}
];

let answers = new Array(QUESTIONS.length).fill(null);
let current = 0;
let secondsLeft = 10*60;
let timerInterval = null;

const startBtn = document.getElementById('startBtn');
const codeInput = document.getElementById('code');
const startForm = document.getElementById('startForm');
const testArea = document.getElementById('testArea');
const showName = document.getElementById('showName');
const questionText = document.getElementById('questionText');
const optionsDiv = document.getElementById('options');
const qIndex = document.getElementById('qIndex');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const timerEl = document.getElementById('timer');
const submitTest = document.getElementById('submitTest');
const results = document.getElementById('results');
const gallery = document.getElementById('gallery');
const certActions = document.getElementById('certActions');

function pad(n){return n<10?'0'+n:n}
function updateTimer(){ timerEl.textContent = pad(Math.floor(secondsLeft/60))+':'+pad(secondsLeft%60); }
function startTimer(){
  updateTimer();
  timerInterval = setInterval(()=>{
    secondsLeft--;
    updateTimer();
    if(secondsLeft<=0){ clearInterval(timerInterval); finishTest(); }
  },1000);
}

function renderQuestion(i){
  const obj = QUESTIONS[i];
  qIndex.textContent = (i+1);
  questionText.textContent = obj.q;
  optionsDiv.innerHTML = '';
  obj.options.forEach((opt, idx)=>{
    const el = document.createElement('label');
    el.className = 'option';
    el.innerHTML = `<input type="radio" name="opt" value="${idx}" ${answers[i]===idx?'checked':''} /> <span style="margin-left:8px">${opt}</span>`;
    el.addEventListener('click', ()=>{
      answers[i] = idx;
      const inputs = optionsDiv.querySelectorAll('input'); inputs.forEach(inp=>inp.checked=false);
      optionsDiv.querySelector(`input[value="${idx}"]`).checked = true;
    });
    optionsDiv.appendChild(el);
  });
}

startBtn.addEventListener('click', ()=>{
  const code = (codeInput.value||'').trim();
  const name = document.getElementById('name').value.trim();
  if(!name){alert('Please enter name'); return;}
  if(code !== 'BGT420'){ alert('Invalid code'); return; }
  startForm.style.display = 'none';
  testArea.style.display = 'block';
  showName.textContent = name;
  renderQuestion(0);
  startTimer();
});

prevBtn.addEventListener('click', ()=>{ if(current>0){ current--; renderQuestion(current); } });
nextBtn.addEventListener('click', ()=>{ if(current<QUESTIONS.length-1){ current++; renderQuestion(current); } });

submitTest.addEventListener('click', ()=>{ if(confirm('Submit test now?')) finishTest(); });

function finishTest(){
  clearInterval(timerInterval);
  document.getElementById('results').style.display = 'block';
  const total = QUESTIONS.length;
  const attempted = answers.filter(a=>a!==null).length;
  let correct = 0; for(let i=0;i<total;i++) if(answers[i]===QUESTIONS[i].answer) correct++;
  const wrong = attempted - correct;
  document.getElementById('resTotal').textContent = total;
  document.getElementById('resAttempted').textContent = attempted;
  document.getElementById('resCorrect').textContent = correct;
  document.getElementById('resIncorrect').textContent = wrong;
  document.getElementById('resScore').textContent = correct + '/' + total;
  results.style.display = 'block';
  certActions.innerHTML = '';

  const name = document.getElementById('name').value.trim() || 'Candidate';
  // if eligible (>=7) generate certificate, preview in gallery and show download button
  if(correct >= 7){
    const p = document.createElement('p'); p.textContent = 'You qualified! Certificate will appear below in gallery.'; certActions.appendChild(p);
    // generate cert image
    setTimeout(()=>{
      const imgData = generateCertificateImage(name, correct, total);
      // create preview card
      const card = document.createElement('div'); card.className='cert-card';
      const img = document.createElement('img'); img.src = imgData;
      const dl = document.createElement('button'); dl.className='btn'; dl.style.marginTop='8px'; dl.textContent='Download Certificate';
      dl.addEventListener('click', ()=>{ downloadImage(imgData, name); });
      card.appendChild(img); card.appendChild(dl);
      gallery.insertBefore(card, gallery.firstChild);
      // auto-download once added
      setTimeout(()=> downloadImage(imgData, name), 600);
    }, 600);
  } else {
    const p = document.createElement('p'); p.textContent = 'Score less than 7 — not eligible for certificate.'; certActions.appendChild(p);
  }
}

// drawing nicer certificate on canvas, returning dataURL
function generateCertificateImage(name, score, total){
  const w = 1400, h = 990;
  const cvs = document.createElement('canvas'); cvs.width = w; cvs.height = h;
  const ctx = cvs.getContext('2d');

  // background gradient + subtle texture
  const g = ctx.createLinearGradient(0,0,0,h);
  g.addColorStop(0,'#fcfcfd'); g.addColorStop(1,'#f0f3f6');
  ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

  // gold decorative border
  ctx.strokeStyle = '#b8860b'; ctx.lineWidth = 18; roundedRect(ctx,30,30,w-60,h-60,18); ctx.stroke();

  // inner white panel
  ctx.fillStyle = '#ffffff'; roundedRect(ctx,70,70,w-140,h-160,12); ctx.fill();

  // subtle header band
  ctx.fillStyle = '#0b2740'; ctx.fillRect(70,90,w-140,80);
  // BGT logo text (white & green)
  ctx.font = 'bold 46px Arial'; ctx.fillStyle = '#fff'; ctx.textAlign='left';
  ctx.fillText('B', 120, 142); ctx.fillStyle='#2bb673'; ctx.fillText('G', 160, 142); ctx.fillStyle='#fff'; ctx.fillText('T', 200, 142);

  // Title
  ctx.textAlign = 'center'; ctx.fillStyle = '#122'; ctx.font = '48px Georgia';
  ctx.fillText('Certificate of Participation', w/2, 270);

  // subtitle
  ctx.font = '18px Arial'; ctx.fillStyle='#334'; ctx.fillText('This is to certify that', w/2, 320);

  // name
  ctx.font = 'bold 48px "Segoe UI"'; ctx.fillStyle = '#0b2740'; ctx.fillText(name, w/2, 390);

  // thin underline
  ctx.beginPath(); ctx.moveTo(w*0.18,410); ctx.lineTo(w*0.82,410); ctx.lineWidth=2; ctx.strokeStyle='#c5cbd1'; ctx.stroke();

  // description/body
  ctx.font = '20px Arial'; ctx.fillStyle='#2a3a46';
  const body = 'Has successfully passed the BGT Assessment and is awarded the following reward.';
  wrapTextCenter(ctx, body, w/2, 450, w-260, 26);

  // pass line (prominent)
  ctx.font = 'bold 40px Arial'; ctx.fillStyle = '#b3471a'; ctx.fillText('Pass! 10% Discount For Trading', w/2, 560);

  // small rule text
  ctx.font = '16px Arial'; ctx.fillStyle='#556'; ctx.fillText('Valid for one-time use. Terms apply.', w/2, 590);

  // date & certificate id (left)
  const dateStr = new Date().toLocaleDateString('en-GB');
  ctx.textAlign='left'; ctx.font='16px Arial'; ctx.fillStyle='#2a3a46';
  ctx.fillText('Date: '+dateStr, w*0.12, 650);
  const certId = 'BGT-'+(10000 + Math.floor(Math.random()*90000));
  ctx.fillText('Certificate ID: '+certId, w*0.12, 678);

  // signatures area (right)
  ctx.textAlign='center';
  // signature dummy lines
  ctx.beginPath(); ctx.moveTo(w*0.62,700); ctx.lineTo(w*0.85,700); ctx.lineWidth=1.5; ctx.strokeStyle='#999'; ctx.stroke();
  ctx.font='20px "Brush Script MT", cursive'; ctx.fillStyle='#1a4bd6'; ctx.fillText('Gopal Singh', w*0.735, 693);
  ctx.font='14px Arial'; ctx.fillStyle='#333'; ctx.fillText('Training Head', w*0.735, 725);

  // second signature
  ctx.beginPath(); ctx.moveTo(w*0.32,700); ctx.lineTo(w*0.55,700); ctx.stroke();
  ctx.font='20px "Brush Script MT", cursive'; ctx.fillStyle='#1a4bd6'; ctx.fillText('H. Kashyap', w*0.43, 693);
  ctx.font='14px Arial'; ctx.fillStyle='#333'; ctx.fillText('Project Manager', w*0.43, 725);

  // footer org
  ctx.textAlign='center'; ctx.font='16px Arial'; ctx.fillStyle='#556'; ctx.fillText('BGT Technologies Pvt Ltd — www.bgt.example', w/2, h-40);

  return cvs.toDataURL('image/png');
}

// rounded rectangle helper
function roundedRect(ctx,x,y,w,h,r){ ctx.beginPath(); ctx.moveTo(x+r,y); ctx.lineTo(x+w-r,y); ctx.quadraticCurveTo(x+w,y,x+w,y+r); ctx.lineTo(x+w,y+h-r); ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h); ctx.lineTo(x+r,y+h); ctx.quadraticCurveTo(x,y+h,x,y+h-r); ctx.lineTo(x,y+r); ctx.quadraticCurveTo(x,y,x+r,y); ctx.closePath(); }

// wrap centered text
function wrapTextCenter(ctx, text, x, y, maxWidth, lineHeight){
  const words = text.split(' '); let line=''; let startY=y;
  for(let n=0;n<words.length;n++){
    const testLine = line + words[n] + ' ';
    const metrics = ctx.measureText(testLine);
    if(metrics.width > maxWidth && n>0){ ctx.fillText(line, x, startY); line = words[n] + ' '; startY += lineHeight; }
    else { line = testLine; }
  }
  ctx.fillText(line, x, startY);
}

// download helper
function downloadImage(dataURL, name){
  const a = document.createElement('a'); a.href = dataURL; a.download = (name.replace(/\s+/g,'_')+'_BGT_certificate.png'); document.body.appendChild(a); a.click(); a.remove();
}

// initial render
renderQuestion(0);
</script>
</body>
</html>
